{{ if .development -}}
{{- $pkgMapping := include "dot_config/packages/package-mapping.toml" | fromToml -}}
# Homebrew package list (for brew bundle)
# Install with: brew bundle --file=~/.config/packages/brewfile
# Generated from package-mapping.toml

# Packages for all OS
{{- range $name, $pkg := $pkgMapping }}
{{- if hasKey $pkg "brew" }}
{{- if or (not (hasKey $pkg "brew_os")) (eq $pkg.brew_os "all") }}
brew "{{ $pkg.brew }}"
{{- end }}
{{- end }}
{{- end }}

# macOS-only packages
{{- if eq .chezmoi.os "darwin" }}
{{- range $name, $pkg := $pkgMapping }}
{{- if hasKey $pkg "brew" }}
{{- if and (hasKey $pkg "brew_os") (eq $pkg.brew_os "darwin") }}
brew "{{ $pkg.brew }}"
{{- end }}
{{- end }}
{{- end }}
{{- end }}
{{ end -}}
